{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function fetchGallery(query) {\n  const BASE_URL = 'https://pixabay.com';\n  const END_POINT = '/api/';\n  const KEY_API = '?key=42408826-646f1c33dda85bc33c99aac2a';\n  const PARAMS = `&q=${query}&image_type=photo&orientation=horizontal&safesearch=true`;\n\n  const url = BASE_URL + END_POINT + KEY_API + PARAMS;\n\n  try {\n    const response = await axios.get(url);\n    return response.data;\n  } catch (error) {\n    throw new Error(error.response.status);\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport const galleryEl = document.querySelector('.gallery');\n\nexport function imageTemplate(data) {\n  const markup = data.hits\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${largeImageURL}\">\n    <img class=\"gallery-img\" src=\"${webformatURL}\" alt=\"${tags}\" />\n  <div class=\"image-description\">\n    <p><b>Likes: </b>${likes}</p>\n    <p><b>Views: </b>${views}</p>\n    <p><b>Comments: </b>${comments}</p>\n    <p><b>Downloads: </b>${downloads}</p>\n  </div>\n  </a>\n</li>`;\n      }\n    )\n    .join('');\n  galleryEl.insertAdjacentHTML('beforeend', markup);\n\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captions: true,\n    captionDelay: 250,\n    captionsData: 'alt',\n    captionPosition: 'bottom',\n  });\n  lightbox.refresh();\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { fetchGallery } from './js/pixabay-api';\nimport { galleryEl, imageTemplate } from './js/render-functions';\n\nconst formEl = document.querySelector('.img-search-form');\nconst loaderEl = document.querySelector('.loader');\nconst btnLoadMore = document.querySelector('.load-more-btn');\n\nlet query;\nlet page;\nlet maxPage;\n\nformEl.addEventListener('submit', onFormSubmit);\nbtnLoadMore.addEventListener('click', onLoadMoreClick);\n\nasync function onFormSubmit(e) {\n  e.preventDefault();\n  hideLoadBtn();\n  galleryEl.innerHTML = '';\n  query = e.target.elements.query.value.trim();\n  page = 1;\n\n  if (query === '') {\n    showError('Sorry, there are no search terms entered. Please try again!');\n    return;\n  }\n  showLoaderEl();\n  try {\n    const data = await fetchGallery(query, page);\n    maxPage = Math.ceil(data.totalHits / 15);\n    if (data.totalHits === 0) {\n      hideLoaderEl();\n      showError(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n      return;\n    }\n    imageTemplate(data);\n  } catch (err) {\n    showError(err);\n  }\n\n  hideLoaderEl();\n  checkBtnVisibleStatus();\n  e.target.reset();\n}\n\nasync function onLoadMoreClick() {\n  page += 1;\n  showLoaderEl();\n\n  try {\n    const data = await fetchGallery(query, page);\n    imageTemplate(data);\n  } catch (err) {\n    showError(err);\n  }\n\n  hideLoaderEl();\n  checkBtnVisibleStatus();\n\n  const height = galleryEl.firstElementChild.getBoundingClientRect().height;\n\n  scrollBy({\n    behavior: 'smooth',\n    top: height * 2,\n  });\n}\n\nfunction showLoadBtn() {\n  btnLoadMore.classList.remove('hidden');\n}\n\nfunction hideLoadBtn() {\n  btnLoadMore.classList.add('hidden');\n}\n\nfunction showLoaderEl() {\n  loaderEl.classList.remove('hidden');\n}\n\nfunction hideLoaderEl() {\n  loaderEl.classList.add('hidden');\n}\n\nfunction showError(msg) {\n  iziToast.error({\n    message: msg,\n    messageColor: 'white',\n    backgroundColor: 'red',\n    position: 'topRight',\n  });\n}\n\nfunction checkBtnVisibleStatus() {\n  if (page >= maxPage) {\n    hideLoadBtn();\n    showError(\"We're sorry, but you've reached the end of search results.\");\n  } else {\n    showLoadBtn();\n  }\n}\n"],"names":["fetchGallery","query","BASE_URL","END_POINT","KEY_API","PARAMS","url","axios","error","galleryEl","imageTemplate","data","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","formEl","loaderEl","btnLoadMore","page","maxPage","onFormSubmit","onLoadMoreClick","e","hideLoadBtn","showError","showLoaderEl","hideLoaderEl","err","checkBtnVisibleStatus","height","showLoadBtn","msg","iziToast"],"mappings":"owBAEO,eAAeA,EAAaC,EAAO,CACxC,MAAMC,EAAW,sBACXC,EAAY,QACZC,EAAU,0CACVC,EAAS,MAAMJ,CAAK,2DAEpBK,EAAMJ,EAAWC,EAAYC,EAAUC,EAE7C,GAAI,CAEF,OADiB,MAAME,EAAM,IAAID,CAAG,GACpB,IACjB,OAAQE,EAAO,CACd,MAAM,IAAI,MAAMA,EAAM,SAAS,MAAM,CACtC,CACH,CCbO,MAAMC,EAAY,SAAS,cAAc,UAAU,EAEnD,SAASC,EAAcC,EAAM,CAClC,MAAMC,EAASD,EAAK,KACjB,IACC,CAAC,CACC,aAAAE,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IACe;AAAA,kCACmBL,CAAa;AAAA,oCACXD,CAAY,UAAUE,CAAI;AAAA;AAAA,uBAEvCC,CAAK;AAAA,uBACLC,CAAK;AAAA,0BACFC,CAAQ;AAAA,2BACPC,CAAS;AAAA;AAAA;AAAA,MAK/B,EACA,KAAK,EAAE,EACVV,EAAU,mBAAmB,YAAaG,CAAM,EAE/B,IAAIQ,EAAe,aAAc,CAChD,SAAU,GACV,aAAc,IACd,aAAc,MACd,gBAAiB,QACrB,CAAG,EACQ,QAAO,CAClB,CClCA,MAAMC,EAAS,SAAS,cAAc,kBAAkB,EAClDC,EAAW,SAAS,cAAc,SAAS,EAC3CC,EAAc,SAAS,cAAc,gBAAgB,EAE3D,IAAItB,EACAuB,EACAC,EAEJJ,EAAO,iBAAiB,SAAUK,CAAY,EAC9CH,EAAY,iBAAiB,QAASI,CAAe,EAErD,eAAeD,EAAaE,EAAG,CAO7B,GANAA,EAAE,eAAc,EAChBC,IACApB,EAAU,UAAY,GACtBR,EAAQ2B,EAAE,OAAO,SAAS,MAAM,MAAM,OACtCJ,EAAO,EAEHvB,IAAU,GAAI,CAChB6B,EAAU,6DAA6D,EACvE,MACD,CACDC,IACA,GAAI,CACF,MAAMpB,EAAO,MAAMX,EAAaC,EAAOuB,CAAI,EAE3C,GADAC,EAAU,KAAK,KAAKd,EAAK,UAAY,EAAE,EACnCA,EAAK,YAAc,EAAG,CACxBqB,IACAF,EACE,0EACR,EACM,MACD,CACDpB,EAAcC,CAAI,CACnB,OAAQsB,EAAK,CACZH,EAAUG,CAAG,CACd,CAEDD,IACAE,IACAN,EAAE,OAAO,OACX,CAEA,eAAeD,GAAkB,CAC/BH,GAAQ,EACRO,IAEA,GAAI,CACF,MAAMpB,EAAO,MAAMX,EAAaC,EAAOuB,CAAI,EAC3Cd,EAAcC,CAAI,CACnB,OAAQsB,EAAK,CACZH,EAAUG,CAAG,CACd,CAEDD,IACAE,IAEA,MAAMC,EAAS1B,EAAU,kBAAkB,sBAAqB,EAAG,OAEnE,SAAS,CACP,SAAU,SACV,IAAK0B,EAAS,CAClB,CAAG,CACH,CAEA,SAASC,GAAc,CACrBb,EAAY,UAAU,OAAO,QAAQ,CACvC,CAEA,SAASM,GAAc,CACrBN,EAAY,UAAU,IAAI,QAAQ,CACpC,CAEA,SAASQ,GAAe,CACtBT,EAAS,UAAU,OAAO,QAAQ,CACpC,CAEA,SAASU,GAAe,CACtBV,EAAS,UAAU,IAAI,QAAQ,CACjC,CAEA,SAASQ,EAAUO,EAAK,CACtBC,EAAS,MAAM,CACb,QAASD,EACT,aAAc,QACd,gBAAiB,MACjB,SAAU,UACd,CAAG,CACH,CAEA,SAASH,GAAwB,CAC3BV,GAAQC,GACVI,IACAC,EAAU,4DAA4D,GAEtEM,GAEJ"}